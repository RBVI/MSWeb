<!DOCTYPE HTML>
<html>
    <head>
        <script language="Javascript" src="js/fuse.min.js"></script>
        <script language="JavaScript" src="js/plotly-latest.min.js"></script>
        <script language="JavaScript" src="js/react.production.min.js"></script>
        <script language="JavaScript" src="js/react-dom.production.min.js"></script>
        <script language="JavaScript" src="js/jquery-3.3.1.min.js"></script>
        <script language="JavaScript" src="js/Reacttest.js"></script>
        <link rel="stylesheet" href="stylesheet.css" type="text/css"  >
        <title>MSWeb Main Page</title>
    </head>
    <body onload="loadList();loadData();">
        <h1>MSWeb Main Page</h1>
        <div id="searchBar">
            <form>
                
                <input  
                    type="text"
                    id="userInput"
                    placeholder="Enter text">
                <button  
                    onclick="fuzzySearch()">Search</button>
                <script>
                    //uses fuse lib
                    function fuzzySearch() {
                            var options = {
                            // returned result will be a list of the items' identifiers 
                            // id: "Hash"?
                            shouldSort: true,
                            threshold: 0.6,
                            location: 0,
                            distance: 100,
                            maxPatternLength: 32,
                            minMatchCharLength: 1,
                            keys: [
                                "Title",
                                "Researcher",
                                "Upload",
                                "Experiment",
                                "Hash"
                            ]
                        };
                        var fuse = new Fuse(list, options); //"list" is the item array
                        var result = fuse.search(userInput);
                    }        

                   function retrieveMetaData() {
                       var xhttp = new XMLHttpRequest();
                       xhttp.onreadystatechange = function() {
                           if(xhttp.readyState == 4 && xhttp.state == 200) {
                                list = this.responseText;
                           }
                       }
                       xhttp.open("GET", "/MSWeb/data/index.json", true);
                       xhttp.send();
                   }

                $(document).ready(function() {
                    retrieveMetaData();
                })

                </script>
            </form>
        </div>
        <div id="root">
            
        </div>
        <div id="dataload"></div>
        <div id="cgitest"></div>
        <script src="js/react.js"></script>
        </body>
</html>
